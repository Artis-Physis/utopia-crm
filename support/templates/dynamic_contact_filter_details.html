{% extends 'adminlte/base.html' %}
{% load i18n %}
{% block title %}{% trans "Dynamic contact filters" %}{% endblock %}
{% block no_heading %}
<h1>{% trans 'Dynamic contact filters' %}</h1>
<p>{% trans 'Edit filter' %}</p>
{% endblock %}
{% block content %}
<div class="mb-3">
  <a href="{% url 'dynamic_contact_filter_add' %}" class="btn btn-primary"><i class="fas fa-plus"></i> New filter</a>
  <a href="{% url 'export_dcf_emails' dcf.id %}" class="btn btn-primary"><i class="fas fa-upload"></i> Export</a>
  <a href="{% url 'dynamic_contact_filter_list' %}" class="btn btn-primary"><i class="fas fa-list"></i> List</a>
</div>
<div class="card">
  <div class="card-header">
    <h2 class="card-title">{{dcf.description}} ({{dcf.get_mode}})</h2>
  </div>
  <div class="card-body">

    <form method="post">
        {% csrf_token %}
        <div class="form-group">
          <label for="mailtrain_id">{% trans "Change Mailtrain ID" %}</label>
          <input name="mailtrain_id" value="{{dcf.mailtrain_id}}" class="form-control">
        </div>
        <div class="form-group">
          <div class="form-check">
            <input type="checkbox" name="autosync" {% if dcf.autosync %}checked{% endif %} class="form-check-input">
            <label for="autosync" class="form-check-label">{% trans "Autosync" %}</label>
          </div>
        </div>
        <div class="form-group">
          <div class="form-check">
            <input type="checkbox" name="active" {% if dcf.active %}checked{% endif %} class="form-check-input">
            <label for="active" class="form-check-label">{% trans "Active" %}</label>
          </div>
        </div>
        <b>{% trans "Last time synced" %}:</b><br> {{dcf.last_time_synced}} <a href="{% url 'sync_with_mailtrain' dcf.id %}" class="btn btn-sm btn-success"><i class="fas fa-sync"></i> {% trans "Sync now" %}</a>
        <br><br>
        <b>{% trans "Email count" %}:</b> {{dcf.get_email_count}}
        <br><br>
        <b>{% trans "Email list" %}:</b>
        <ul>
            {% for email in dcf.get_emails %}
                <li>{{email}}</li>
            {% endfor %}
        </ul>
        <div class="text-right">
          <input type="submit" name="submit" class="btn bg-gradient-primary">
        </div>
    </form>

  </div>
</div>
{% endblock %}
